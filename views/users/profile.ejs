<%- include('../partials/header') %>

    <div class="container-fluid">
        <main role="main" class="col-md-5 col-lg-5 px-4 bg-dark text-white">
            <%=msg%>
                <form action="/user/profile/?_method=PUT" method="post">
                    <fieldset>
                        <legend>Profile</legend>
                        <label>Username: <input name="username" minlength="1" maxlength="30" value="<%= user.username%>" disabled/></label>
                        <br>
                        <label>Current Password: <input type="password" name="current_password" minlength="8" /></label>
                        <br />
                        <label>New Password: <input type="password" name="new_password" minlength="8" /></label>
                        <br />
                        <label>Monthly Salary ($/mth): <input value="<%= user.monthly_salary %>" type="number" name="monthly_salary"
                                placeholder="No negative amount please" step="0.01" min="0"
                                pattern="^\s*$^[+]?([0-9]+(?:[\.][0-9]*)?|\.[0-9]+)$" /></label>
                        <br />
                        <label>Gender:</label>
                        <select name="gender">
                            <option value="M" <%= (user.gender === "M") ? "selected" : "" %>>M</option>
                            <option value="F" <%= (user.gender === "F") ? "selected" : "" %>>F</option>
                            <option value="NA" <%= (user.gender === "NA") ? "selected" : "" %>>NA</option>
                        </select>
                        <br />
                        <label>Date of Birth: <input type="date" name="dob" id="dob" value="user.dob"/></label>
                        <script>
                            document.getElementById("dob").value = "<%= new Date(user.dob).toJSON().slice(0,10) %>"
                        </script>
                        <br />
                        <label>Permission Rights:</label>
                        <select name="user_permission">
                            <option value="Admin" <%= (user.user_permission === "Admin") ? "selected" : "" %>>Admin</option>
                            <option value="User" <%= (user.user_permission === "User") ? "selected" : "" %>>User</option>
                        </select>
                        <br />
                        <label>Partner's Username: <input name="partner_username" value="<%= user.partner_username%>"/></label>
                        <label>Token: <input name="token" value="<%= user.token%>" /></label>
                        <br>
                        <button class="userBtn">Update</button>
                    </fieldset>
                </form>
        </main>
    </div>
    <%- include('../partials/footer') %>