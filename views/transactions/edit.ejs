<%- include('../partials/header')%>

    <h2>
        Edit Transaction:
            <br>
    </h2>

    <%=msg%>
        

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-2 bg-light d-none d-md-block sidebar">
            <div class="left-sidebar">
                <ul class="nav flex-column sidebar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" href="/categories/all">
                            <svg class="bi bi-chevron-right" width="16" height="16" viewBox="0 0 20 20"
                                fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            </svg>
                            Categories
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/transactions/all">
                            <svg class="bi bi-chevron-right" width="16" height="16" viewBox="0 0 20 20"
                                fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            </svg>
                            Transactions
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
            <div class="row bg-dark text-white">
                <%=msg%>
            </div>
            <div class="row bg-dark text-white">
                <form action="/transactions/<%= transaction._id%>?_method=PUT" method="POST">
                    <fieldset>
                        <legend>Edit Form</legend>
                        <label>Date:
                            <input type="date" id="date" name="date" />
                        </label>
                        <script>
                            $("#date").val(new Date(transaction.date).toJSON().slice(0, 10));
                        </script>
                        <br>
                        <label>Category:
                            <select name="category_name">
                                <% categories.map(c=> { %>
                                    <option value="<%=c._id%>" <%=(transaction.category_id._id.equals(c._id)) ? "selected" : "" %>><%=
                                            c.category_name %>
                                    </option>
                                    <% }) %>
                            </select>
                        </label>
                        <br>
                        <label>Amount: $
                            <input type="number" placeholder="No negative amount please" step="0.01" min="0"
                                pattern="^\s*$^[+]?([0-9]+(?:[\.][0-9]*)?|\.[0-9]+)$" name="amount" value="<%=transaction.amount%>">
                        </label>
                        <br>
                        <button class="editBtn" type="submit">Amend</button>
                    </fieldset>
                </form>
            </div>
        </main>
    </div>
</div>
<%- include('../partials/footer')%>